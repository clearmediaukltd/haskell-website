<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.Wai.Middleware.Static</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Network-Wai-Middleware-Static.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">wai-middleware-static-0.6.0.1: WAI middleware that serves requests to static files.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Network.Wai.Middleware.Static</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Middlewares</a></li><li><a href="#g:2">Policies</a></li><li><a href="#g:3">Utilities</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Serve static files, subject to a policy that can filter or
   modify incoming URIs. The flow is:</p><p>incoming request URI ==&gt; policies ==&gt; exists? ==&gt; respond</p><p>If any of the polices fail, or the file doesn't
   exist, then the middleware gives up and calls the inner application.
   If the file is found, the middleware chooses a content type based
   on the file extension and returns the file contents as the response.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:static">static</a> :: <a href="file:///Users/chris/Documents/Work/Haskell/haskell-web/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.8.3/wai-3.0.2.3/html/Network-Wai.html#t:Middleware">Middleware</a></li><li class="src short"><a href="#v:staticPolicy">staticPolicy</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="file:///Users/chris/Documents/Work/Haskell/haskell-web/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.8.3/wai-3.0.2.3/html/Network-Wai.html#t:Middleware">Middleware</a></li><li class="src short"><a href="#v:unsafeStaticPolicy">unsafeStaticPolicy</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="file:///Users/chris/Documents/Work/Haskell/haskell-web/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.8.3/wai-3.0.2.3/html/Network-Wai.html#t:Middleware">Middleware</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Policy">Policy</a></li><li class="src short"><a href="#v:-60--124--62-">(&lt;|&gt;)</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></li><li class="src short"><a href="#v:-62--45--62-">(&gt;-&gt;)</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></li><li class="src short"><a href="#v:policy">policy</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a>) -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></li><li class="src short"><a href="#v:predicate">predicate</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Bool.html#t:Bool">Bool</a>) -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></li><li class="src short"><a href="#v:addBase">addBase</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></li><li class="src short"><a href="#v:addSlash">addSlash</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></li><li class="src short"><a href="#v:contains">contains</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></li><li class="src short"><a href="#v:hasPrefix">hasPrefix</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></li><li class="src short"><a href="#v:hasSuffix">hasSuffix</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></li><li class="src short"><a href="#v:noDots">noDots</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></li><li class="src short"><a href="#v:isNotAbsolute">isNotAbsolute</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></li><li class="src short"><a href="#v:only">only</a> :: [(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a>, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a>)] -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></li><li class="src short"><a href="#v:tryPolicy">tryPolicy</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a></li></ul></div><div id="interface"><h1 id="g:1">Middlewares</h1><div class="top"><p class="src"><a name="v:static" class="def">static</a> :: <a href="file:///Users/chris/Documents/Work/Haskell/haskell-web/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.8.3/wai-3.0.2.3/html/Network-Wai.html#t:Middleware">Middleware</a></p><div class="doc"><p>Serve static files out of the application root (current directory).
 If file is found, it is streamed to the client and no further middleware is run.</p><p>Note: for security reasons, this uses the <code><a href="Network-Wai-Middleware-Static.html#v:noDots">noDots</a></code> and <code><a href="Network-Wai-Middleware-Static.html#v:isNotAbsolute">isNotAbsolute</a></code> policy by default.</p></div></div><div class="top"><p class="src"><a name="v:staticPolicy" class="def">staticPolicy</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="file:///Users/chris/Documents/Work/Haskell/haskell-web/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.8.3/wai-3.0.2.3/html/Network-Wai.html#t:Middleware">Middleware</a></p><div class="doc"><p>Serve static files subject to a <code><a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></code></p><p>Note: for security reasons, this uses the <code><a href="Network-Wai-Middleware-Static.html#v:noDots">noDots</a></code> and <code><a href="Network-Wai-Middleware-Static.html#v:isNotAbsolute">isNotAbsolute</a></code> policy by default.</p></div></div><div class="top"><p class="src"><a name="v:unsafeStaticPolicy" class="def">unsafeStaticPolicy</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="file:///Users/chris/Documents/Work/Haskell/haskell-web/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.8.3/wai-3.0.2.3/html/Network-Wai.html#t:Middleware">Middleware</a></p><div class="doc"><p>Serve static files subject to a <code><a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></code>. Unlike <code><a href="Network-Wai-Middleware-Static.html#v:static">static</a></code> and <code><a href="Network-Wai-Middleware-Static.html#v:staticPolicy">staticPolicy</a></code>, this
 has no policies enabled by default, and is hence insecure.</p></div></div><h1 id="g:2">Policies</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Policy" class="def">Policy</a></p><div class="doc"><p>Take an incoming URI and optionally modify or filter it.
   The result will be treated as a filepath.</p></div><div class="subs instances"><p id="control.i:Policy" class="caption collapser" onclick="toggleSection('i:Policy')">Instances</p><div id="section.i:Policy" class="show"><table><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Monoid.html#t:Monoid">Monoid</a> <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></td><td class="doc"><p>Note:
   <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Monoid.html#v:mempty">mempty</a></code> == <code>policy Just</code> (the always accepting policy)
   <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Monoid.html#v:mappend">mappend</a></code> == <code>&gt;-&gt;</code> (policy sequencing)</p></td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:-60--124--62-" class="def">(&lt;|&gt;)</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> <span class="fixity">infixr 4</span><span class="rightedge"></span></p><div class="doc"><p>Choose between two policies. If the first fails, run the second.</p></div></div><div class="top"><p class="src"><a name="v:-62--45--62-" class="def">(&gt;-&gt;)</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> <span class="fixity">infixr 5</span><span class="rightedge"></span></p><div class="doc"><p>Sequence two policies. They are run from left to right. (Note: this is <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Monoid.html#v:mappend">mappend</a></code>)</p></div></div><div class="top"><p class="src"><a name="v:policy" class="def">policy</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a>) -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></p><div class="doc"><p>Lift a function into a <code><a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></code></p></div></div><div class="top"><p class="src"><a name="v:predicate" class="def">predicate</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Bool.html#t:Bool">Bool</a>) -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></p><div class="doc"><p>Lift a predicate into a <code><a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></code></p></div></div><div class="top"><p class="src"><a name="v:addBase" class="def">addBase</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></p><div class="doc"><p>Add a base path to the URI</p><pre>staticPolicy (addBase &quot;/home/user/files&quot;)</pre><p>GET &quot;foo/bar&quot; looks for &quot;/home/user/files/foo/bar&quot;</p></div></div><div class="top"><p class="src"><a name="v:addSlash" class="def">addSlash</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></p><div class="doc"><p>Add an initial slash to to the URI, if not already present.</p><pre>staticPolicy addSlash</pre><p>GET &quot;foo/bar&quot; looks for &quot;/foo/bar&quot;</p></div></div><div class="top"><p class="src"><a name="v:contains" class="def">contains</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></p><div class="doc"><p>Accept only URIs containing given string</p></div></div><div class="top"><p class="src"><a name="v:hasPrefix" class="def">hasPrefix</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></p><div class="doc"><p>Accept only URIs with given prefix</p></div></div><div class="top"><p class="src"><a name="v:hasSuffix" class="def">hasSuffix</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></p><div class="doc"><p>Accept only URIs with given suffix</p></div></div><div class="top"><p class="src"><a name="v:noDots" class="def">noDots</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></p><div class="doc"><p>Reject URIs containing &quot;..&quot;</p></div></div><div class="top"><p class="src"><a name="v:isNotAbsolute" class="def">isNotAbsolute</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></p><div class="doc"><p>Reject URIs that are absolute paths</p></div></div><div class="top"><p class="src"><a name="v:only" class="def">only</a> :: [(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a>, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a>)] -&gt; <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a></p><div class="doc"><p>Use URI as the key to an association list, rejecting those not found.
 The policy result is the matching value.</p><pre>staticPolicy (only [(&quot;foo/bar&quot;, &quot;/home/user/files/bar&quot;)])</pre><p>GET &quot;foo/bar&quot; looks for &quot;/home/user/files/bar&quot;
 GET &quot;baz/bar&quot; doesn't match anything</p></div></div><h1 id="g:3">Utilities</h1><div class="top"><p class="src"><a name="v:tryPolicy" class="def">tryPolicy</a> :: <a href="Network-Wai-Middleware-Static.html#t:Policy">Policy</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-String.html#t:String">String</a></p><div class="doc"><p>Run a policy</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>